# aero-ros-pkg-prerelease

## Pre-requirement

### Install ROS

```
sudo apt-get install ros-indigo-desktop-full ros-indigo-roseus ros-indigo-hrpsys-ros-bridge ros-indigo-euscollada ros-indigo-pr2eus
```

### Setup catkin workspace

```
sudo apt-get install python-wstool python-catkin-tools
mkdir -p ~/ros/indigo
cd ~/ros/indigo
wstool init src
catkin init
catkin build
source ~/ros/indigo/devel/setup.bash
```

## Install

### Clone repository

```
cd ~/ros/indigo/src
wstool set aero-ros-pkg-prerelease https://github.com/hyaguchijsk/aero-ros-pkg-prerelease.git --git
wstool up aero-ros-pkg-prerelease
```

### Build packge

#### Build aero_description

```
cd aero-ros-pkg-prerelease
catkin build aero_description
soure ~/.bashrc
```

#### Setup aero_startup

In the initial stage, `aero_startup` is not ros package, it has no `CMakeLists.txt`.
`CMakeLists.txt` and some controller modules are generated by `aero_description/setup.sh`.
`setup.sh` requires robot directory as an argument e.g. `setup.sh typeF`.

```
roscd aero_description
./setup.sh typeF  # including catkin build aero_startup
source ~/.bashrc
```

If you need clean up `aero_startup`, please use `aero_description/clean.sh`.

#### Setup aero_moveit_config
##### install
```bash
sudo apt-get install ros-indigo-moveit
sudo apt-get install ros-indigo-moveit-ros-planning-interface ros-indigo-moveit-ros-planning ros-indigo-moveit-core ros-indigo-moveit-ros-perception ros-indigo-moveit-ros-warehouse ros-indigo-moveit-kinematics
```
##### setup directory
```bash
# tell ROS where is aero_moveit_config directory
cd aero_description
cd ../aero_moveit_config
catkin bt

source ~/ros/indigo/devel/setup.bash

# run setup code
roscd aero_moveit_config/utils
./setup_moveit_config.sh typeF
```

### Build aeroeus

```
catkin build aeroeus  # nothing to build, to recognize from rospack
source ~/.bashrc
```

## Control AERO

### Setup udev

T.B.D.

### Run controllers

```
roslaunch aero_startup aero_bringup.launch
```

### View Robot Model

```
rosrun rviz rviz
```

then add RobotModel, change Robot Description to `aero_description`.


### Run euslisp

```
roscd aeroeus
roseus aero-interface.l
```

To initialize eus interface,

```
(aero-init)
(load-controllers)
(objects (list *aero*))
```

Then, you can control AERO from euslisp, like

```
(send *aero* :reset-manip-pose)
(send *ri* :angle-vector (send *aero* :angle-vector) 5000)
```
